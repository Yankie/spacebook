---
title: Состав и использование КСП
permalink: /pdk-content-and-usage/
eleventyNavigation:
   parent: ug
   key: pdk-content-and-usage
   order: 20
   title: Состав и использование КСП
---


## Доступ к КСП

Данный КСП внутренние заказчики могут подключать непосредственно по локальной сети. Необходимые инструкции можно найти в базе знаний по адресу: [http://vega.niime.local/dokuwiki/doku.php](http://vega.niime.local/dokuwiki/doku.php)

Внешние заказчики могут получить КСП на электронных носителях или через FTP-сервер после заключения соответствующих договоров с АО "НИИМЭ". Контактная информация приведена в соответствующем разделе данного руководства.

## Состав и структура КСП

Состав КСП по технологии HCMOS8D:

| PDK_<версия>                    | &nbsp;                                                                                |
|:--------------------------------|:--------------------------------------------------------------------------------------|
| ├───📁 __cadence__/             | &nbsp;                                                                                |
| │   ├───📁 __cdb__/             | _Библиотеки CDBA_                                                                     |
| │   │   ├───📄 DK_hcmos8d       | _Технологическая библиотека_                                                          |
| │   │   ├───📄 STlib            | _Библиотека технологически независимых элементов_                                     |
| │   │   └───📄 devices_symbols  | _Библиотека элементов КСП_                                                            |
| │   ├───📁 __oa__/              | _Библиотеки OA_                                                                       |
| │   │   ├───📄 DK_hcmos8d       | _Технологическая библиотека_                                                          |
| │   │   ├───📄 STlib            | _Библиотека технологически независимых элементов_                                     |
| │   │   └───📄 devices_symbols  | _Библиотека элементов КСП_                                                            |
| │   ├───📁 __skill__/           | _SKILL-файлы, необходимые для функционирования КСП_                                   |
| │   ├───📁 __stream__/          | &nbsp;                                                                                |
| │   │   └───📄 StreamInOut      | _Файл трансляции из/в формат GDSII_                                                   |
| │   ├───📄 DK_hcmos8d.tf.cdb    | _Файл для подключения библиотек CDBA_                                                 |
| │   ├───📄 DK_hcmos8d.tf.oa     | _Файл для подключения библиотек OA_                                                   |
| │   ├───📄 cds.lib.cdb          | _Технологический файл CDBA_                                                           |
| │   ├───📄 cds.lib.oa           | _Технологический файл OA_                                                             |
| │   └───📄 display.drf          | _Файл описания отображения слоев_                                                     |
| ├───📁 __capTbl__/              | _Файлы .capTbl для экстракции межсоединений на этапе статического временного анализа_ |
| │   ├───📄 hcmos8d_max.capTbl   | _Файл .capTbl для худшего случая_                                                     |
| │   ├───📄 hcmos8d_min.capTbl   | _Файл .capTbl для типового случая_                                                    |
| │   └───📄 hcmos8d_typ.capTbl   | _Файл .capTbl для лучшего случая_                                                     |
| ├───📁 __doc__/                 | _Документация_                                                                        |
| ├───📁 __env__/                 | _Файлы с настройками для работы с КСП_                                                |
| ├───📁 __lef__/                 | &nbsp;                                                                                |
| │   └───📄 DK_hcmos8d.techlef   | _Технологический LEF-файл_                                                            |
| ├───📁 __models__/              | &nbsp;                                                                                |
| │   └───📁 __spectre__/         | _Spice-модели для САПР Cadence Spectre_                                               |
| └───📁 __physical__/            | &nbsp;                                                                                |
| ├───📁 __calibre__/             | _Файлы физической верификации для САПР Mentor Graphics Calibre_                       |
| │   ├───📄 calibre.drc          | _DRC-файл_                                                                            |
| │   ├───📄 calibre.lvs          | _LVS-файл_                                                                            |
| │   ├───📄 calibre.xrc          | _Файл отображения элементов_                                                          |
| │   ├───📄 calibre2spectre.perl | _Вспомогательные файлы настроек_                                                      |
| │   ├───📄 calibre_drc.ctrl     | _Файл для запуска DRC из командной строки_                                            |
| │   ├───📄 calibre_lvs.ctrl     | _Файл для запуска LVS из командной строки_                                            |
| │   ├───📄 calview.cellmap      | _PEX-файл_                                                                            |
| │   ├───📄 emptysubckt.ckt      | _Файл подключается для LVS проверки ОТР ячейки_                                       |
| │   ├───📄 hcmos8d.*            | _Файл отображения слоев для Calibredrv_                                               |
| │   └───📄 hsmos8d.layerprops   | _Файл постобработки нетлиста_                                                         |
| ├───📁 __encounter__/           | _Файлы физической верификации для САПР Cadence PVS_                                   |
| ├───📁 __pvs__/                 | _map файл для трансляции данных из SoC Encounter_                                     |
| └───📁 __qrc__/                 | _QRC техфайл cell уровня_                                                             |

{.fs-tree-table}

## Установка и настройка КСП в среде Cadence

Для правильного использования КСП в среде Cadence необходимо выполнить следующие шаги (переменные окружения должны устанавливаться каждый раз при открытии нового окна терминала):

1. Распаковать архив `<имя_КСП>_<версия_КСП>.tar.gz` в любое удобное место на рабочей станции или сервере.
2. Создать рабочий каталог для нового проекта (каталог, откуда будет производиться запуск среды САПР Cadence):

   ```csh
   mkdir   ~/new_project
   ```

3. В рабочем каталоге установить переменную окружения DKHCMOS8D, которая должна содержать полный путь к папке `PDK_<версия_КСП>`. Например, для пользователей csh:

   ```csh
   setenv DKHCMOS8D <полный_путь_к_КСП>/HCMOS8D/PDK_<версия_КСП>
   ```

4. Установить переменную окружения `CDS_Netlisting_Mode` в значение `Analog`:

   ```csh
   setenv CDS_Netlisting_Mode Analog
   ```

   !!!warning __Примечание:__
      Перечисленные выше переменные окружения можно определить в файле `.cshrc` для пользователей csh. В этом случае они будут установлены автоматически при запуске окна терминала.

      Пример файла `.cshrc` с минимальным набором настроек, необходимым для корректной работы с КСП, находится в каталоге `env` в составе КСП (`./<имя_КСП>/PDK_<версия_КСП>/env/.cshrc_example`).

5. Скопировать в рабочий каталог проекта файл `.cdsinit`:

   ```csh
   cp $DKHCMOS8D/env/.cdsinit ~/new_project
   ```

   Файл `.cdsinit` содержит важные настройки для работы с КСП. В случае отказа от использования поставляемого вместе с КСП файла настроек пользователю необходимо самостоятельно убедиться в наличии и правильности настроек в собственном файле. В случае если у пользователя уже существует файл `.cdsinit` в его рабочем каталоге, то для корректной инициализации КСП в этот файл необходимо добавить следующие строки:

   ```lisp
   let((dk)
      if( dk = getShellEnvVar("DKHCMOS8D". then
         load(strcat(dk "/cadence/skill/technologySetting/setup/cdstool"))
      else
         printf("*PDK-MSG* FAIL: Shell variable DKHCMOS8D not found. Technology setting not set.\n")
      );;if
   );;let
   ```

   Это позволит сохранить и пользовательские настройки и корректно инициализировать КСП для последующей работы.

6. В данной версии КСП файл описания отображения слоев `display.drf` загружается автоматически. Поэтому копировать его в рабочий каталог не нужно. Если пользователь хочет использовать собственный файл отображения слоев, то его необходимо поместить в свой рабочий каталог. В этом случае будет использоваться файл пользователя.
7. Создать в рабочем каталоге проекта файл `cds.lib` (в случае создания нового проекта "с нуля"), открыть его в текстовом редакторе и добавить следующую строку:

   - если используется Cadence CDBA:

      ```bash
      INCLUDE ${DKHCMOS8D}/cadence/cds.lib.cdb`
      ```

   - если используется Cadence OA:

      ```bash
      INCLUDE ${DKHCMOS8D}/cadence/cds.lib.oa
      ```

   В качестве альтернативы можно воспользоваться интерактивным средством подключения библиотек Library Path Editor, вызвав его из меню `Tools` основного окна среды Cadence (Command Interpreter Window, CIW-окна). В открывшемся диалоговом окне в поле `Library` указывается имя библиотеки, а в поле `Path` путь к данной библиотеке.

   Для работы с КСП необходимо подключить таким образом библиотеки __DK_hcmos8d__, __STlib__ и __devices_symbols__, после чего сохранить изменения, выбрав пункт `Save as…` в меню `File`. Если библиотеки не появились в списке доступных, то следует выбрать пункт меню `View -> Refresh` в рабочем окне Library Manager.

8. Перейти в рабочий каталог проекта и выполнить запуск среды САПР Cadence. При открытии менеджера библиотек (Library Manager. все необходимые для работы с КСП библиотеки (__DK_hcmos8d__, __devices_symbols__. будут подключены автоматически. Кроме того, будут установлены пути ко всем файлам, необходимым для работы с КСП (модельные файлы, файлы верификации и т.д.). О корректном подключении КСП можно судить по отсутствию сообщений об ошибках и появившемся меню `"HCMOS8D"` в CIW окне.

   !!!warning __Примечание__
      Для корректного функционирования пунктов меню `"HCMOS8D"` в операционной системе должен быть установлен Acrobat Reader.
